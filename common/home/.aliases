#/bin/bash

LS_LINUX="-hB --color=auto"
LS_OSX="-hG"

# OSX
function _alias_osx {
  alias ls="command ls $LS_OSX"
  alias unq='xattr -dr com.apple.quarantine'
  alias updatedb='sudo /usr/libexec/locate.updatedb'

  #homebrew
  alias bi='brew install'
  alias bu='brew uninstall'
  alias bl='brew link'
  alias bul='brew unlink'
  alias br='brew remove -f'
}

# linux
#
function _alias_linux {
  alias ls="command ls $LS_LINUX"

  # aptitude
  alias ai='sudo apt-get install'
  alias as='apt-cache search'
}

# filesystem
#
function _alias_fs {
  alias l.="ls -d .*"
  alias lal='ls -hal'

  alias ddiff='diff -rq'
  alias duh='du -h --max-depth=1'

  alias fn='find . -name'
  alias loc='locate'

  alias profile="$EDITOR ~/.profile ~/.zshrc ~/.bashrc ~/.bash_functions ~/.aliases"
  alias src='source ~/.zshrc'
  alias sal='source ~/.aliases'

  alias fix_dir_perms='find . -type d -print0 | xargs -0 chmod 775'
  alias fix_file_perms='find . -type f -print0 | xargs -0 chmod 664'
  alias fix_all_perms='perm_norm_dir; perm_norm_file'
  alias bootstrap='_bootstrap'
}

# navigation
#
function _alias_nav {
  alias h="cd ~"
  alias b="cd .."
  alias db="cd $DROPBOX"
  alias bin="cd ~/bin"
  alias dev="cd $DROPBOX/dev"
  alias cust="cd $DROPBOX/customization"
  alias desk="cd ~/Desktop"
  alias down="cd ~/Downloads"
  alias proj="cd $DROPBOX/dev/projects"
  alias notes="cd $DROPBOX/notes"
  alias courses="cd ~/Dropbox/dev/edu/courses"

  alias enova="cd $DROPBOX/dev/work/enova"
  alias drw="cd $DROPBOX/dev/work/drw"
  alias txi="cd $DROPBOX/dev/work/tablexi"
  alias 8b="cd $DROPBOX/dev/work/enova/8b"
}

#remotes
#
function _alias_remotes {
  alias skryl='ssh rut216@ssh.skryl.com'
  alias minimac='ssh rut216@home.skryl.org'
  alias vintaget='ssh vintaget@vintagetreasury.com'
}

# tools
#
function _alias_tools {

# sudo
  alias _='sudo'

# pygmentize
  alias catrb='pygmentize -l ruby'
  alias catjs='pygmentize -l javascript'
  alias catyml='pygmentize -l yaml'
  alias cathtml='pygmentize -l html'

# fasd
  fasd_cd() { [ $# -gt 1 ] && cd "$(fasd -e echo "$@")" || fasd "$@"; }
  alias j='fasd_cd -d'

# tmux
  alias tm="tmux -u"
  alias tma="tmux attach-session"
  alias tmls="tmux -u list-sessions"

# vim
  alias v='vim'
  alias vimrc="vim ~/.vimrc"

# emacs
  alias emacs='emacs -nw'

# sublime
  alias subl="/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl"

# fasd
  alias a='fasd -a'        # any
  alias s='fasd -si'       # show / search / select
  alias d='fasd -d'        # directory
  alias f='fasd -f'        # file
  alias sd='fasd -sid'     # interactive directory selection
  alias sf='fasd -sif'     # interactive file selection
  alias z='fasd_cd -d'     # cd, same functionality as j in autojump
  alias zz='fasd_cd -d -i' # cd with interactive selection

# rbenv
  alias rb='rbenv'
  alias rbv='rbenv version'
  alias rbl='rbenv local'
  alias rbg='rbenv global'
  alias rbi='rbenv install'
  alias rbh='rbenv rehash'
  alias rbw='rbenv which'

# ruby/rails
  alias gi='gem install'
  alias be='bundle exec'
  alias rc='rails console'
  alias rs='rails server'
  alias rl='tail -f log/development.log'
  alias pryc='bundle exec pry -r ./config/environment'
  alias rspec='nocorrect rspec'
  alias guard='be guard'
  alias db_create='rake db:create'
  alias db_drop='rake db:drop'
  alias db_migrate='rake db:migrate'
  alias db_seed='rake db:seed'
  alias db_reset='rake db:reset'

# git
  alias ga='git add -A'
  alias gp='git push origin'
  alias gpu='git pull'
  alias gph='git push heroku'
  alias gps='git push staging'
  alias gpp='git push production'
  alias gl='git lg'
  alias gs='git status'
  alias gd='git diff'
  alias gdc='git diff --cached'
  alias gb='git branch'
  alias gc='git clone'
  alias gco='git checkout'
  alias gm='git merge'
  alias gcm='git commit -a -m'
  alias gca='git commit -a'
  alias gra='git remote add'
  alias grr='git remote rm'
  alias grh='git reset --hard'

  alias gpua='for dir in $(find . -type d -name .git | xargs -n 1 dirname | sort); do; cd $dir; pwd; git pull; cd -; done;'
  alias bundle_all='for dir in $(find . -type f -name Gemfile | xargs -n 1 dirname | sort); do; cd $dir; pwd; bundle; cd -; done;'

# heroku
  alias hc='heroku run console'
  alias hr='heroku run rake'
  alias hl='heroku logs'
  alias hps='heroku ps'
  alias hconf='heroku config'

# synergy
 alias synergy_client='synergyc 192.168.1.100'
 alias synergy_server='synergys --config ~/.synergy'

# go
 alias go='nocorrect go'

# repls
 alias sml='rlwrap sml'
 alias racket='rlwrap racket'

# eclipse
 alias eclim='$ECLIPSE_HOME/eclimd'

}

# load aliases
if test -n $OSX; then
  _alias_osx
else
  _alias_linux
fi

_alias_fs
_alias_nav
_alias_remotes
_alias_tools
